import requests
import json
import os

def limpar_tela():
    """Limpa a tela do terminal"""
    os.system('clear' if os.name == 'posix' else 'cls')

def obter_informacoes_ip(ip):
    """ObtÃ©m informaÃ§Ãµes de localizaÃ§Ã£o do IP"""
    try:
        # API gratuita para geolocalizaÃ§Ã£o por IP
        url = f"http://ip-api.com/json/{ip}"
        response = requests.get(url, timeout=10)
        
        if response.status_code == 200:
            dados = response.json()
            
            if dados['status'] == 'success':
                return dados
            else:
                return None
        else:
            return None
            
    except requests.exceptions.RequestException:
        return None
    except json.JSONDecodeError:
        return None

def exibir_informacoes(dados):
    """Exibe as informaÃ§Ãµes formatadas"""
    print("â•" * 50)
    print("ğŸŒ INFORMAÃ‡Ã•ES DE LOCALIZAÃ‡ÃƒO")
    print("â•" * 50)
    print(f"ğŸ“¡ IP: {dados.get('query', 'N/A')}")
    print(f"ğŸ™ï¸  PaÃ­s: {dados.get('country', 'N/A')}")
    print(f"ğŸ›ï¸  CÃ³digo do PaÃ­s: {dados.get('countryCode', 'N/A')}")
    print(f"ğŸ“ RegiÃ£o: {dados.get('regionName', 'N/A')}")
    print(f"ğŸ¢ Cidade: {dados.get('city', 'N/A')}")
    print(f"ğŸ“® CEP: {dados.get('zip', 'N/A')}")
    print(f"ğŸ“¡ Provedor: {dados.get('isp', 'N/A')}")
    print(f"ğŸŒ OrganizaÃ§Ã£o: {dados.get('org', 'N/A')}")
    print(f"ğŸ§­ Latitude: {dados.get('lat', 'N/A')}")
    print(f"ğŸ§­ Longitude: {dados.get('lon', 'N/A')}")
    print(f"â° Fuso HorÃ¡rio: {dados.get('timezone', 'N/A')}")
    print("â•" * 50)

def main():
    """FunÃ§Ã£o principal"""
    limpar_tela()
    
    logo = '''

 â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„   â–„â–„â–„       â–„â–„â–„â–„â–„   â–„â–„â–„â–„â–„â–„   â–„â–„â–„       â–„â–„â–„â–„â–„  
 â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ–€â–€â–ˆâ–„   â–ˆâ–ˆâ–€â–€â–€â–€â–ˆâ–„ â–ˆâ–ˆâ–€â–€â–€â–€â–ˆâ–„ â–ˆâ–ˆâ–€â–€â–ˆâ–„   â–ˆâ–ˆâ–€â–€â–€â–€â–ˆâ–„ 
 â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ     â–ˆâ–ˆ â–ˆâ–ˆ     â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ     â–ˆâ–ˆ 
 â–ˆâ–ˆâ–ˆâ–€â–€â–ˆâ–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ     â–ˆâ–ˆ â–ˆâ–ˆ     â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ     â–ˆâ–ˆ 
 â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ     â–ˆâ–ˆ â–ˆâ–ˆ     â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ     â–ˆâ–ˆ 
 â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–„â–„â–ˆâ–€   â–ˆâ–ˆâ–„â–„â–„â–„â–ˆâ–€ â–ˆâ–ˆâ–„â–„â–„â–„â–ˆâ–€ â–ˆâ–ˆâ–„â–„â–ˆâ–€   â–ˆâ–ˆâ–„â–„â–„â–„â–ˆâ–€ 
 â–€â–€   â–€â–€   â–€â–€â–€      â–€â–€â–€â–€â–€     â–€â–€â–€â–€â–€    â–€â–€â–€      â–€â–€â–€â–€â–€ 
 
                By:Gustaa
                Insta: gustavo rtz
 
                   _______________
 
                    VersÃ£o: v1.0
                         ğŸ€ 
                   _______________                  
    '''
    
    # Exibe o logo
    print(logo)  
    print("=" * 50)
    
    while True:
        print("\nOpÃ§Ãµes:")
        print("1. Consultar IP especÃ­fico")
        print("2. Consultar IP atual")
        print("3. Sair")
        
        opcao = input("\nEscolha uma opÃ§Ã£o (1-3): ").strip()
        
        if opcao == '1':
            ip = input("\nDigite o IPv4: ").strip()
            
            # ValidaÃ§Ã£o bÃ¡sica do IP
            if not ip.replace('.', '').isdigit() or ip.count('.') != 3:
                print("âŒ IP invÃ¡lido! Formato correto: 192.168.1.1")
                continue
                
            print(f"\nğŸ” Consultando IP: {ip}...")
            
        elif opcao == '2':
            # ObtÃ©m o IP pÃºblico atual
            try:
                response = requests.get('https://api.ipify.org', timeout=5)
                ip = response.text.strip()
                print(f"\nğŸ” Consultando seu IP atual: {ip}...")
            except:
                print("âŒ Erro ao obter IP atual.")
                continue
                
        elif opcao == '3':
            print("ğŸ‘‹ Saindo...")
            break
            
        else:
            print("âŒ OpÃ§Ã£o invÃ¡lida!")
            continue
        
        # ObtÃ©m as informaÃ§Ãµes do IP
        dados = obter_informacoes_ip(ip)
        
        if dados:
            exibir_informacoes(dados)
            
            # OpÃ§Ã£o para ver no mapa
            ver_mapa = input("\nğŸ—ºï¸  Deseja ver a localizaÃ§Ã£o no mapa? (s/n): ").lower()
            if ver_mapa == 's':
                lat = dados.get('lat')
                lon = dados.get('lon')
                if lat and lon:
                    mapa_url = f"https://www.google.com/maps?q={lat},{lon}"
                    print(f"ğŸŒ Abra no navegador: {mapa_url}")
                else:
                    print("âŒ Coordenadas nÃ£o disponÃ­veis")
        else:
            print("âŒ Erro ao obter informaÃ§Ãµes do IP")
            print("âš ï¸  Verifique sua conexÃ£o ou tente novamente")

if __name__ == "__main__":
    # Verifica se o requests estÃ¡ instalado
    try:
        import requests
    except ImportError:
        print("ğŸ“¦ Instalando biblioteca requests...")
        os.system('pip install requests')
        import requests
    
    main()
